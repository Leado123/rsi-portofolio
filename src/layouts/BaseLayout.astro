---
import "../styles/global.css";
import Font from "astro/components/Font.astro";
import Navbar from "@/components/Navbar.astro";
import { SEO } from "astro-seo";

interface Props {
  title?: string;
  description?: string;
  image?: string;
  url?: string;
  type?: "website" | "article";
  publishedTime?: string;
  modifiedTime?: string;
  author?: string;
}

const { 
  title,
  description,
  image,
  url,
  type = "website",
  publishedTime,
  modifiedTime,
  author
} = Astro.props;

const siteUrl = import.meta.env.PUBLIC_SITE_URL || Astro.url.origin;
const canonicalUrl = url ? `${siteUrl}${url}` : Astro.url.href;

// Default SEO values
const defaultTitle = "Leo Wen";
const defaultDescription = "Blog by Leo Wen, who is a junior in high school in Southern California, whose interested in Genomics and Synthetic Biology";
const defaultImage = `${siteUrl}/og-image.jpg`;

const seoTitle = title || defaultTitle;
const seoDescription = description || defaultDescription;
const seoImage = image || defaultImage;
---

<!doctype html>
<Font cssVariable="--font-forma-text" />
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
        <SEO
          title={seoTitle}
          description={seoDescription}
          openGraph={{
            basic: {
              title: seoTitle,
              type: type,
              image: seoImage,
              url: canonicalUrl,
            },
            ...(type === "article" && {
              article: {
                ...(publishedTime && { publishedTime }),
                ...(modifiedTime && { modifiedTime }),
                ...(author && { author }),
              }
            })
          }}
          twitter={{
            card: "summary_large_image",
            image: seoImage,
            title: seoTitle,
            description: seoDescription,
          }}
        />
    </head>
    <body
        class="w-full min-h-screen overflow-x-hidden m-0 p-0"
    >
        <div class="w-full min-h-screen relative">
            <Navbar />

            <div class="w-full min-h-screen flex flex-col overflow-y-auto overflow-x-hidden">
                <slot />
            </div>
        </div>
    </body>
</html>

